<div class="container">

  <login ng-if="!isAuthenticated"></login>

  <div class="container" ng-if="isAuthenticated">
    {{user | json}}
    <hr>
    <h3>Welcome {{user.firstName}} {{ user.lastName }}!</h3>
    <hr>
    <div class="row">
      <div class="col-md-3">
        <div style="word-wrap: break-word">
          <h4>Your Profile</h4>
          <img ng-src="{{user.photoUrl}}" class="img-responsive">
          <button class="btn btn-primary btn-block">Change Picture</button>
          <button class="btn btn-danger btn-block" ng-click="logout()">Logout</button>
        </div>
      </div>
      <!-- Authenticated Users -->
      <div class="col-md-9" ng-if="!user.isAdmin">
        <div bs-active-pane="activeTab" bs-tabs nav-class="nav-tabs nav-justified">
          <div data-title="Account" bs-pane>
            <form editable-form name="accountForm" onbeforesave="updateUser($data)">
              <div>
                <span class="title">First name: </span>
                <span editable-text="user.firstName" e-name="firstName" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.firstName }}</span>
              </div>
              <div>
                <span class="title">Last name: </span>
                <span editable-text="user.lastName" e-name="lastName" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.lastName }}</span>
              </div>
              <div>
                <span class="title">Email: </span>
                <span editable-text="user.email" e-name="email" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.email }}</span>
              </div>
              <br>
              <div class="buttons">
                <!-- button to show form -->
                <button type="button" class="btn btn-default" ng-click="accountForm.$show()" ng-show="!accountForm.$visible">
                  Edit
                </button>
                <!-- buttons to submit / cancel form -->
                <span ng-show="accountForm.$visible">
                <button type="submit" class="btn btn-primary" ng-disabled="accountForm.$waiting" ng-click="updateUser()">
                  Save
                </button>
                <button type="button" class="btn btn-default" ng-disabled="accountForm.$waiting" ng-click="accountForm.$cancel()">
                  Cancel
                </button>
                </span>
              </div>
            </form>
            <hr>
            <form editable-form name="passwordForm" onaftersave="saveUser()">
              <div>
                <span class="title">Current Password: </span>
                <span editable-text="user.password" e-name="password" onbeforesave="checkIfPasswordCorrect($data)" e-required></span>
              </div>
              <span ng-show="passwordForm.$visible">
              <div>
                <span class="title">New Password: </span>
                <span editable-text="user.password" e-name="password" onbeforesave="checkNewPasswordMatch($data)" e-required></span>
              </div>
              <div>
                <span class="title">Retype New Password: </span>
                <span editable-text="user.password" e-name="password" onbeforesave="checkNewPasswordMatch($data)" e-required></span>
              </div>
              </span>
              <br>
              <div class="buttons">
                <!-- button to show form -->
                <button type="button" class="btn btn-default" ng-click="passwordForm.$show()" ng-show="!passwordForm.$visible">
                  Edit
                </button>
                <!-- buttons to submit / cancel form -->
                <span ng-show="passwordForm.$visible">
                <button type="submit" class="btn btn-primary" ng-disabled="passwordForm.$waiting" ng-click="updateUser()">
                  Save
                </button>
                <button type="button" class="btn btn-default" ng-disabled="passwordForm.$waiting" ng-click="passwordForm.$cancel()">
                  Cancel
                </button>
                </span>
              </div>
          </div>
          <div data-title="Address" bs-pane>

          </div>
          <div title="Payment" bs-pane>

          </div>
        </div>
      </div>


      <!-- Admin Users -->
      <div class="col-md-9" ng-if="user.isAdmin">
        <div bs-active-pane="activeTab" bs-tabs nav-class="nav-tabs nav-justified">
          <div data-title="Account" bs-pane>
            <form editable-form name="accountForm" onaftersave="saveUser()">
              <div>
                THIS IS ADMIN FIELD
                <span class="title">First name: </span>
                <span editable-text="user.firstName" e-name="firstName" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.firstName }}</span>
              </div>
              <div>
                <span class="title">Last name: </span>
                <span editable-text="user.lastName" e-name="lastName" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.lastName }}</span>
              </div>
              <div>
                <span class="title">Email: </span>
                <span editable-text="user.email" e-name="email" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.email }}</span>
              </div>
              <hr>
              <div>
                <span class="title">Password: </span>
                <span editable-text="user.password" e-name="password" onbeforesave="checkFieldIfEmpty($data)" e-required>{{ user.password }}</span>
              </div>

              <div class="buttons">
                <!-- button to show form -->
                <button type="button" class="btn btn-default" ng-click="accountForm.$show()" ng-show="!accountForm.$visible">
                  Edit
                </button>
                <!-- buttons to submit / cancel form -->
                <span ng-show="accountForm.$visible">
                <button type="submit" class="btn btn-primary" ng-disabled="accountForm.$waiting" ng-click="updateUser()">
                  Save
                </button>
                <button type="button" class="btn btn-default" ng-disabled="accountForm.$waiting" ng-click="accountForm.$cancel()">
                  Cancel
                </button>
              </span>
              </div>
            </form>
          </div>
          <div data-title="Address" bs-pane>

          </div>
          <div title="Payment" bs-pane>

          </div>
        </div>
      </div>
    </div>

    <hr>
    <h4>
    Past Orders
  </h4>
    <ul>
    	<div ng-repeat="order in previousOrder | orderBy : '-createdAt'">
    		<!-- {{order | json}} -->
    		<h6>Order Date: {{order.createdAt | date : "MM/dd/yyyy 'at' h:mma" }}</h3>
    			<div class="products row">
    				<div ng-repeat="product in order.products" class="col-sm-2">
    					<!-- {{product|json}} -->
    					<img class="img-responsive" src="{{product.product.image}}">
    					<h5>{{product.product.title}}</h5>
    					<h6>{{product.purchasedPrice / 100 | currency}}</h6>
    					<h6>Purchased Quantity: {{product.quantity}}</h6>
    				</div>
    			</div>
    	</div>
     </ul> 


</div>
  
</div>
